@model Pinicules.Presentation.Models.MoviesSearchResult

<script type="text/javascript">
    function OnComplete(request, status) {
        var button = $(loadMoreMovies)[0];
        if (button) {
            $(button).remove()
        }        
    }
</script>

@if (Model.Items == null || Model.Items.Count == 0)
{
    <div>No results</div>
}
else
{
    <div class="container" id="searchResults">
        <div class="row">
            @{
    int numItems = 0;
            }
            @foreach (var searchResultItem in Model.Items)
            {
                <div class="col-md-2 @((@numItems++ % 5) == 0 ? "col-md-offset-1" : "")">
                    <div class="thumbnail">
                        <img src="@searchResultItem.Image" alt="Sample Image">
                    </div>
                </div>

                if (((numItems) % 5) == 0)
                {
                    <br />
                    <div class="clearfix"></div>
                }
            }
        </div>
    </div>

    if (Model.LoadMore)
    {
        using (Ajax.BeginForm( new AjaxOptions
        {
            UpdateTargetId = "searchMoviesResults",
            InsertionMode = InsertionMode.InsertAfter,
            OnComplete = "OnComplete",
            Url = Url.Action("SearchMovies", new { page = Model.NextPage }),
        }))
        {
            <button type="submit" id="loadMoreMovies" class="btn btn-primary col-md-2 col-md-offset-5">LOAD MORE</button>
        }

    }

    
}

